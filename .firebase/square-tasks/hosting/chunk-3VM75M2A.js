import{a as G,b as U,c as Y,d as J,e as K,f as Q,g as X,h as T,i as b,j as Z,k as ee}from"./chunk-GQ67NWOW.js";import{$ as h,C as v,E as w,F as s,I as o,J as a,K as m,L as O,M as p,N as P,T as l,U as D,V as f,W as F,X as E,Y as z,_ as k,a as B,aa as y,b as j,ba as V,c as A,ca as W,i as C,l as N,la as $,ma as R,na as H,oa as L,p as d,pa as _,q as g,u as x,v as M,x as S,z as r}from"./chunk-KWE7BIMZ.js";var te=(()=>{class t{apiService=d(X);stateService=d(T);constructor(){}getTasks(){let n=this.stateService.squareStateData().email||"ex@dd.co";return this.apiService.get(`tasks/${n}`)}createTask(n){return this.apiService.post("tasks",n)}updateTask(n){return this.apiService.put(`tasks/${n.id}`,n)}deleteTask(n){return this.apiService.delete(`tasks/${n.id}`)}static \u0275fac=function(i){return new(i||t)};static \u0275prov=N({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var ne=(()=>{class t{stateService=d(T);logout(){this.stateService.resetSquareState()}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=g({type:t,selectors:[["app-square-header"]],standalone:!0,features:[k],decls:5,vars:0,consts:[[1,"square-header"],["type","button",3,"click"],["src","/assets/svg/logout.svg","alt","Logout"]],template:function(i,e){i&1&&(o(0,"header",0)(1,"h1"),l(2,"Square"),a(),o(3,"button",1),p("click",function(){return e.logout()}),m(4,"img",2),a()())},dependencies:[_],styles:["[_nghost-%COMP%]{display:flex;width:100%}.square-header[_ngcontent-%COMP%]{width:100%;text-align:center;position:fixed;z-index:10;background:var(--light-color);height:5rem;box-shadow:2px -2px 10px #0303031a;display:flex;align-items:center;justify-content:center}.square-header[_ngcontent-%COMP%] > h1[_ngcontent-%COMP%]{margin:0;font-size:var(--font-md);font-weight:700;font-family:Roboto Mono,monospace}.square-header[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{position:absolute;top:1.5rem;border:none;outline:none;right:1rem;height:1.5rem;width:1.5rem;display:flex;justify-content:center;align-items:center;cursor:pointer;background:transparent}"],changeDetection:0})}return t})();var re=()=>({style:"minimal",size:"small",type:"button"}),oe=(()=>{class t{task=null;action=new S;static \u0275fac=function(i){return new(i||t)};static \u0275cmp=g({type:t,selectors:[["app-square-task"]],inputs:{task:"task"},outputs:{action:"action"},standalone:!0,features:[k],decls:13,vars:9,consts:[[1,"square-task"],[1,"square-task__content"],[3,"click","squareButton"],["src","assets/svg/pencil.svg","alt","Edit",1,"square-task__icon"]],template:function(i,e){i&1&&(o(0,"section",0)(1,"h3"),l(2),a(),o(3,"p"),l(4),a(),o(5,"div",1)(6,"span"),l(7),m(8,"br"),l(9),V(10,"date"),a(),o(11,"app-square-button",2),p("click",function(){return e.action.emit("edit")}),m(12,"img",3),a()()()),i&2&&(r(2),D(e.task==null?null:e.task.title),r(2),D(e.task==null?null:e.task.description),r(3),f(" Status: ",e.task!=null&&e.task.completed?"Completed":"Pending"," "),r(2),f(" ",W(10,5,e.task==null?null:e.task.created_at,"dd/MM/yyyy")," "),r(2),s("squareButton",h(8,re)))},dependencies:[_,L,b],styles:["[_nghost-%COMP%]{display:block}.square-task[_ngcontent-%COMP%]{width:14rem;height:14rem;display:flex;flex-direction:column;justify-content:flex-start;background-color:#f2ceee;border-radius:2px;padding:1.5rem;box-sizing:border-box}.square-task[_ngcontent-%COMP%] > h3[_ngcontent-%COMP%]{font-size:var(--font-sm);margin:0;font-weight:500;font-family:Roboto Mono,monospace;height:20%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.square-task[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{font-size:var(--font-xs);margin:0;font-weight:400;font-family:Roboto Mono,monospace;height:55%;text-wrap:pretty;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:5;line-clamp:5;-webkit-box-orient:vertical}.square-task__content[_ngcontent-%COMP%]{height:25%;display:flex;flex-direction:row;justify-content:space-between;align-items:flex-end}.square-task__content[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-size:var(--font-xxs);font-weight:400;font-family:Roboto Mono,monospace}.square-task__icon[_ngcontent-%COMP%]{padding:.25rem 0}@media (max-width: 640px){.square-task[_ngcontent-%COMP%]{width:100%}}"],changeDetection:0})}return t})();var se=t=>({left:t}),ae=(()=>{class t{isToggled=!1;toggle=new S;onClickToggle(){this.toggle.emit(!this.isToggled)}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=g({type:t,selectors:[["app-square-toggle"]],inputs:{isToggled:"isToggled"},outputs:{toggle:"toggle"},standalone:!0,features:[k],decls:5,vars:4,consts:[[1,"container-toggle",3,"click"],[1,"toggle",3,"ngStyle"],["type","checkbox",1,"toggle-input"],[1,"toggle-status"]],template:function(i,e){i&1&&(o(0,"section",0),p("click",function(){return e.onClickToggle()}),m(1,"div",1)(2,"input",2),a(),o(3,"span",3),l(4),a()),i&2&&(r(),s("ngStyle",y(2,se,e.isToggled?"calc(50% + 3px)":"3px")),r(3),f(" ",e.isToggled?"Completed":"Pending",`
`))},dependencies:[_,H],styles:["[_nghost-%COMP%]{display:flex;gap:.5rem}.container-toggle[_ngcontent-%COMP%]{cursor:pointer;display:block;position:relative;width:40px;height:20px;opacity:1;pointer-events:auto;border-radius:10px;box-shadow:0 2px 4px #0000001a;background-color:#fff;border:1px solid var(--dark-color)}.toggle[_ngcontent-%COMP%]{display:block;position:absolute;top:50%;left:3px;width:calc(50% - 6px);height:calc(100% - 6px);transform:translateY(-50%);font-size:14px;transition:left .3s ease;border-radius:10px;background-color:#030303}.toggle-input[_ngcontent-%COMP%]{position:absolute;opacity:0;visibility:hidden;width:1px;height:1px;pointer-events:none}.toggle-status[_ngcontent-%COMP%]{color:var(--dark-color);font-size:var(--font-xxs);font-family:Open Sans;font-weight:400;align-self:center}"],changeDetection:0})}return t})();var le=()=>({type:"button",uppercase:!0,style:"minimal",size:"small"}),pe=()=>["required"],ce=t=>({placeholder:"Title",validations:t,typeField:"input"}),ue=()=>({placeholder:"Description",typeField:"textarea"}),me=t=>({uppercase:!0,style:"primary",size:"small",type:"submit",disabled:t}),de=()=>({uppercase:!0,style:"minimal",size:"small",type:"button"});function ge(t,I){if(t&1){let n=O();o(0,"app-square-task",15),p("action",function(e){let u=x(n).$implicit,c=P();return M(c.setActionTask(e,u))}),a()}if(t&2){let n=I.$implicit;s("task",n)}}function fe(t,I){if(t&1){let n=O();o(0,"app-square-button",16),p("click",function(){x(n);let e=P();return M(e.onSubmitTask("delete"))}),o(1,"span",17),l(2," Delete "),a()()}t&2&&s("squareButton",h(1,de))}var it=(()=>{class t{taskService=d(te);destroy$=new A;stateService=d(T);actionTask=v(null);showDialogTask=!1;currentTask=v({title:"",description:"",completed:!1});errorFormTask=v(!1);ngOnInit(){this.getTasks()}getTasks(){this.taskService.getTasks().pipe(C(this.destroy$)).subscribe(n=>{this.stateService.setTasks(n)})}onSubmitTask(n){let i=n||this.actionTask(),e={edit:()=>this.updateTask(),new:()=>this.createTask(),delete:()=>this.deleteTask()};if(i&&e[i])return e[i]()}createTask(){this.taskService.createTask(this.currentTask()).pipe(C(this.destroy$)).subscribe(n=>{this.stateService.addTask(this.currentTask()),this.setActionTask(null,null)})}updateTask(){this.taskService.updateTask(this.currentTask()).pipe(C(this.destroy$)).subscribe(n=>{this.stateService.updateTask(n),this.setActionTask(null,null)})}deleteTask(){this.taskService.deleteTask(this.currentTask()).pipe(C(this.destroy$)).subscribe(()=>{this.stateService.deleteTask(this.currentTask()),this.setActionTask(null,null)})}setActionTask(n,i){this.actionTask.set(n),this.showDialogTask=n!==null,i!==null&&this.currentTask.set(i),(i===null||n===null)&&(this.currentTask.set({title:"",description:"",completed:!1}),this.errorFormTask.set(!1))}updateStatusTask(n){this.currentTask.update(i=>j(B({},i),{completed:n}))}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=g({type:t,selectors:[["app-tasks-container"]],standalone:!0,features:[k],decls:21,vars:19,consts:[[1,"task-container"],[1,"task-container__title"],[1,"mt-1",3,"click","squareButton"],["src","assets/svg/add.svg","alt","Add"],[1,"task-container__list"],[3,"task","action",4,"ngFor","ngForOf"],[3,"actionDialog","showDialog"],[1,"task-modal__title"],[3,"ngSubmit"],["name","title",3,"ngModelChange","validationError","ngModel","fieldOptions"],["name","description",1,"mt-1",3,"ngModelChange","ngModel","fieldOptions"],[1,"task-modal__actions"],[3,"toggle","isToggled"],[3,"squareButton","click",4,"ngIf"],[3,"squareButton"],[3,"action","task"],[3,"click","squareButton"],[1,"task-modal__edit"]],template:function(i,e){i&1&&(m(0,"app-square-header"),o(1,"section",0)(2,"h1",1),l(3,"My Tasks"),a(),o(4,"app-square-button",2),p("click",function(){return e.setActionTask("new",null)}),m(5,"img",3),l(6," Add "),a(),o(7,"div",4),w(8,ge,1,1,"app-square-task",5),a(),o(9,"app-square-dialog",6),p("actionDialog",function(){return e.setActionTask(null,null)}),o(10,"h2",7),l(11),a(),o(12,"form",8),p("ngSubmit",function(){return e.onSubmitTask()}),o(13,"app-square-field",9),z("ngModelChange",function(c){return E(e.currentTask().title,c)||(e.currentTask().title=c),c}),p("validationError",function(c){return e.errorFormTask.set(c)}),a(),o(14,"app-square-field",10),z("ngModelChange",function(c){return E(e.currentTask().description,c)||(e.currentTask().description=c),c}),a(),o(15,"section",11)(16,"app-square-toggle",12),p("toggle",function(c){return e.updateStatusTask(c)}),a(),o(17,"div"),w(18,fe,3,2,"app-square-button",13),o(19,"app-square-button",14),l(20),a()()()()()()),i&2&&(r(4),s("squareButton",h(12,le)),r(4),s("ngForOf",e.stateService.squareStateData().tasks),r(),s("showDialog",e.showDialogTask),r(2),f(" ",e.actionTask()==="new"?"New Task":"Edit Task"," "),r(2),F("ngModel",e.currentTask().title),s("fieldOptions",y(14,ce,h(13,pe))),r(),F("ngModel",e.currentTask().description),s("fieldOptions",h(16,ue)),r(2),s("isToggled",e.currentTask().completed),r(2),s("ngIf",e.actionTask()==="edit"),r(),s("squareButton",y(17,me,e.errorFormTask())),r(),f(" ",e.actionTask()==="edit"?"Edit":"Save"," "))},dependencies:[_,$,R,Q,K,G,U,J,Y,ne,oe,b,ee,Z,ae],styles:["[_nghost-%COMP%]{display:block;box-sizing:border-box}.task-container[_ngcontent-%COMP%]{margin-top:6rem;display:flex;flex-direction:column;width:100%;padding:1rem 2rem;box-sizing:border-box}.task-container__title[_ngcontent-%COMP%]{font-size:1.5rem;font-family:Roboto Mono;font-weight:500;line-height:31px;margin:0}.task-container__list[_ngcontent-%COMP%]{box-sizing:border-box;display:grid;grid-template-columns:repeat(auto-fill,minmax(14rem,1fr));justify-content:space-between;gap:1rem;margin-top:2rem}.task-modal__title[_ngcontent-%COMP%]{font-family:Open Sans;font-weight:700;font-size:var(--font-md)}.task-modal__actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:1rem}.task-modal__actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;gap:1rem}.task-modal__edit[_ngcontent-%COMP%]{padding:.25rem 0}"],changeDetection:0})}return t})();export{it as TasksContainerComponent};
